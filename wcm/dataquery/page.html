<!doctype html>
<html lang="en">
  <head>
		<meta charset="UTF-8">
		<!--jQuery UI CSS -->
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />

		<!--Font Awesome CSS-->
		<link rel="stylesheet" type = 'text/css' href = "https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>

		<!-- Chosen CSS -->
		<link rel = "stylesheet" text = "text/css" href ="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.0/chosen.css"/>

		<!-- DataTables CSS -->
		<link rel="stylesheet" type = "text/css" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.css">

		<!-- C3.css -->
  		<link rel="stylesheet" href="https://rawgit.com/c3js/c3/master/c3.min.css" type="text/css">

  		<!-- General Page CSS-->
		<link rel= "stylesheet" href="/wcm/dataquery/css/page.css" text = "text/css" />
	</head>

	<body>
		<div id = "mainContainer" class = "">
			<br>

			<!--Data Type Selector-->
			<div id = 'data-type' style = "margin: 5px;">
				<h3> Select Data Type </h3>
				<div id = 'data-type-buttonset' style = "font-size: 9pt;">
					<input type = 'radio' id = 'data-type-1' name ='data-type-radio' value = 'report'><label for = 'data-type-1'>Reports</label>
					<input type = 'radio' id = 'data-type-2' name ='data-type-radio' value = 'watch'><label for = 'data-type-2'>Watches</label>
					<input type = 'radio' id = 'data-type-3' name ='data-type-radio' value = 'outlook' disabled><label for = 'data-type-3'>Outlooks</label>
				</div>
			</div>

			<!--Report Source Selector-->
			<div id="report-source" style = "margin: 5px;" class="hidden">
				<h3> Select Report Source </h3>
				<div id = 'report-source-buttonset' style = "font-size: 9pt;">
					<input type = 'radio' id = 'report-source-1' name ='report-source-radio' class = 'report_source' value = 'LSR' aria-pressed="true" checked><label for = 'report-source-1' class="ui-state-active" aria-pressed="true">Local Storm Report</label>
					<input type = 'radio' id = 'report-source-2' name ='report-source-radio' class = 'report_source' value = 'stormData'><label for = 'report-source-2'>NCEI Storm Data</label>
				</div>
			</div>

			<!--Report Type Selector-->
				<div id="report-type" style = "margin: 5px;" class="hidden">
				<h3> Select Report Type </h3>
				<div id = 'report-type-buttonset' style = "font-size: 9pt;">
					<input type = 'radio' id = 'report-type-1' name ='report-type-radio' class = 'report_type' value = 'ALL' checked><label for = 'report-type-1' aria-pressed="true" class="ui-state-active">All</label>
					<input type = 'radio' id = 'report-type-2' name ='report-type-radio' class = 'report_type' value = 'T'><label for = 'report-type-2'>Tornado</label>
					<input type = 'radio' id = 'report-type-3' name ='report-type-radio' class = 'report_type' value = 'A'><label for = 'report-type-3'>Hail</label>
					<input type = 'radio' id = 'report-type-4' name ='report-type-radio' class = 'report_type' value = 'ALLW'><label for = 'report-type-4'>All Wind</label>
					<input type = 'radio' id = 'report-type-5' name ='report-type-radio' class = 'report_type' value = 'G'><label for = 'report-type-5'>Wind Gust</label>
					<input type = 'radio' id = 'report-type-6' name ='report-type-radio' class = 'report_type' value = 'W'><label for = 'report-type-6'>Wind Damage</label>
				</div>
			</div>

			<!--Watch Type Selector-->
				<div id="watch-type" style = "margin: 5px;" class="hidden">
				<h3> Select Watch Type </h3>
				<div id = 'watch-type-buttonset' style = "font-size: 9pt;">
					<input type = 'radio' id = 'watch-type-1' name ='watch-type-radio' class = 'watch_type' value = 'ALL'><label for = 'watch-type-1'>All</label>
					<input type = 'radio' id = 'watch-type-2' name ='watch-type-radio' class = 'watch_type' value = 'TOR' aria-pressed="true" checked><label for = 'watch-type-2' aria-pressed="true" class="ui-state-active">Tornado</label>
					<input type = 'radio' id = 'watch-type-3' name ='watch-type-radio' class = 'watch_type' value = 'SVR'><label for = 'watch-type-3'>Severe</label>
					<input type = 'radio' id = 'watch-type-4' name ='watch-type-radio' class = 'watch_type' value = 'PDS' disabled><label for = 'watch-type-4'>PDS</label>
				</div>
			</div>

			<!--Date Picker Calendars-->
			<div id = "date-pickers" class = "hidden">
				<table width = "100%">
					<col width = "150">
					<col width = "150">
					<col width = "350">
					<tr>
						<th>Start Date</th>
						<th>End Date</th>
						<th>&nbsp;</th>
					</tr>
					<tr>
						<td>
							<center>
								<input type = 'hidden' id = 'start-dp'></input>
								<form class = 'form-wrapper cf'>
									<i id ='startCal' class = 'fa fa-calendar fa-lg fa-align-center'></i>
									<input id = 'startCalInput' type = 'text' placeholder = 'Start Date (YYYYMMDD)'>
								</form>
							</center>
						</td>
						<td>
							<center>
								<input type = 'hidden' id = 'end-dp'></input>
								<form class = 'form-wrapper cf' style = 'margin-left: 10px;'>
									<i id ='endCal' class = 'fa fa-calendar fa-lg fa-align-center'></i>
									<input id = 'endCalInput' type = 'text' placeholder = 'End Date (YYYYMMDD)'>
								</form>
							</center>
						</td>
						<td>
							&nbsp;
						</td>
					</tr>
				</table>
			</div>

			<!--Watch Filters by State/CWA/FIPS-->
			<div id = "all-watch-filters" class = "hidden">
				<table width = "100%">
					<col width = "350">
					<col width = "350">
					<col width = "350">
					<tr>
						<th> State Filter</th>
						<th> CWA Filter</th>
						<th> FIPS Filter</th>
					</tr>
					<tr>
						<td id = "watch-state-filter"></td>
						<td id = "watch-cwa-filter"></td>
						<td id = "watch-fips-filter"></td>
					</tr>
				</table>
			</div>

			<!--Report Filters by State/CWA/FIPS-->
			<div id = "all-report-filters" class = "hidden">
				<table width = "100%">
					<col width = "350">
					<col width = "350">
					<col width = "350">
					<tr>
						<th> State Filter</th>
						<th> CWA Filter</th>
						<th> FIPS Filter</th>
					</tr>
					<tr>
						<td id = "report-state-filter"></td>
						<td id = "report-cwa-filter"></td>
						<td id = "report-fips-filter"></td>
					</tr>
				</table>
			</div>

			<!--Report Filters by Tornado Rating-->
			<div id = "tor-report-filters" class = "hidden">
				<table>
					<col width = "150">
					<col width = "150">
					<tr>
						<th> Min Magnitude</th>
						<th> Max Magnitude</th>
					</tr>
					<tr>
						<td id = "report-tor-min">
							<select data-placeholder = '<=' class = 'report-filters'>
								<option value = "">>=</option>
								<option value = "0">>= EF0</option>
								<option value = "1">>= EF1</option>
								<option value = "2">>= EF2</option>
								<option value = "3">>= EF3</option>
								<option value = "4">>= EF4</option>
								<option value = "5">EF5</option>
							</select>
						</td>
						<td id = "report-tor-max">
							<select data-placeholder = '<=' class = 'report-filters'>
								<option value = ""><</option>
								<option value = "1">< EF1</option>
								<option value = "2">< EF2</option>
								<option value = "3">< EF3</option>
								<option value = "4">< EF4</option>
								<option value = "5">< EF5</option>
							</select>
						</td>
					</tr>
				</table>
			</div>

			<!--Report Filters by Wind Speed-->
			<div id = "wind-report-filters" class = "hidden">
				<table>
					<col width = "150">
					<col width = "150">
					<tr>
						<th> Min Magnitude</th>
						<th> Max Magnitude</th>
					</tr>
					<tr>
						<td id = "report-wind-min">
							<select data-placeholder = '<=' class = 'report-filters'>
								<option value = "">>=</option>
								<option value = '58'>>= 58 mph</option>
								<option value = '65'>>= 65 mph</option>
								<option value = '70'>>= 70 mph</option>
								<option value = '75'>>= 75 mph</option>
								<option value = '80'>>= 80 mph</option>
								<option value = '85'>>= 85 mph</option>
								<option value = '90'>>= 90 mph</option>
								<option value = '95'>>= 95 mph</option>
								<option value = '100'>>= 100 mph</option>
							</select>
						</td>
						<td id = "report-wind-max">
							<select data-placeholder = '<' class = 'report-filters'>
								<option value = ""><</option>
								<option value = '58'>< 58 mph</option>
								<option value = '65'>< 65 mph</option>
								<option value = '70'>< 70 mph</option>
								<option value = '75'>< 75 mph</option>
								<option value = '80'>< 80 mph</option>
								<option value = '85'>< 85 mph</option>
								<option value = '90'>< 90 mph</option>
								<option value = '95'>< 95 mph</option>
								<option value = '100'>< 100 mph</option>
							</select>
						</td>
					</tr>
				</table>
			</div>		

			<!--Report Filters by Hail Size-->
			<div id = "hail-report-filters" class = "hidden">
				<table>
					<col width = "150">
					<col width = "150">
					<tr>
						<th> Min Magnitude</th>
						<th> Max Magnitude</th>
					</tr>
					<tr>
						<td id = "report-hail-min">
							<select data-placeholder = '<=' class = 'report-filters'>
								<option value = "">>=</option>
								<option value = "0">>= 0"</option>
								<option value = "1">>= 1"</option>
								<option value = "2">>= 2"</option>
								<option value = "3">>= 3"</option>
								<option value = "4">>= 4"</option>
								<option value = "5">>= 5"</option>
							</select>
						</td>
						<td id = "report-hail-max">
							<select data-placeholder = '<=' class = 'report-filters'>
								<option value = ""><</option>
								<option value = "1"><= 1"</option>
								<option value = "2"><= 2"</option>
								<option value = "3"><= 3"</option>
								<option value = "4"><= 4"</option>
								<option value = "5"><= 5"</option>
							</select>
						</td>
					</tr>
				</table>
			</div>

			<!--Generate Button-->
			<div id = "go-btn">Generate</div>

			<!--Display results of filter-->
			<div id = "filter-opt-list" class = "hidden">
				<div id = "date-filter-list">Date Range:</div>
				<div id = "state-filter-list">State Filter(s):</div>
				<div id = "cwa-filter-list">CWA Filter(s):</div>
				<div id = "fips-filter-list">FIPS Filter(s):</div>
				<div id = "type-filter-list">Report Type Filter(s):</div>
				<br>
			</div>

			<!--View Type Selector-->
			<div id="view-type" class="hidden">
			<h3> Select View Type </h3>
				<div id = 'view-type-buttonset' style = "font-size: 9pt;">
					<input type = 'radio' id = 'view-type-1' name ='view-type-radio' value = 'table' aria-pressed="true"><label for = 'view-type-1' class="ui-state-active" aria-pressed="true">Table</label>
					<input type = 'radio' id = 'view-type-2' name ='view-type-radio' value = 'chart'><label for = 'view-type-2'>Chart</label>
					<input type = 'radio' id = 'view-type-3' name ='view-type-radio' value = 'map' disabled><label for = 'view-type-3'>Map</label>
				</div>
			</div>

			<!--Chart Type Selector-->
			<div id="chart-type" class="hidden">
			<h3> Select Chart Type </h3>
				<div id = 'chart-type-buttonset' style = "font-size: 9pt;">
					<input type = 'radio' id = 'chart-type-1' name ='chart-type-radio' value = 'month' aria-pressed="true"><label for = 'chart-type-1' class="ui-state-active" aria-pressed="true">By Month</label>
					<input type = 'radio' id = 'chart-type-2' name ='chart-type-radio' value = 'year'><label for = 'chart-type-2'>By Year</label>
					<input type = 'radio' id = 'chart-type-3' name ='chart-type-radio' value = 'type'><label for = 'chart-type-3' id="chartType3">Test</label>
					<input type = 'radio' id = 'chart-type-4' name ='chart-type-radio' value = 'pie'><label for = 'chart-type-4' id="chartType4">Pie Chart</label>
				</div>
			</div>


			<!--Dialog Box that appears while loading-->
			<div id="dialog" title="Loading...">
  			<div class="progress-label">Depending on query size, loading can take up to 20 seconds</div>
			</div>

			<!--Button to Download Data in JSON-->
			<button type = "button" class="download hidden btn btn-primary">Download JSON</button>

			<!--Table with total data-->
			<div id = 'total-table'></div>

			<!--checkbox to turn on/off first/last sorting-->
			<div id = 'firstlastcheckbox' class="hidden">
			<input type="checkbox" id="firstlast">
			<label for="firstlast">Toggle First/Last Sorting option (ignore year)</label>
			</div>

			<!--Table with Data-->
			<div id="data-table"></div>

			<!--Chart div where chart is drawn-->
			<div id = 'chart' style = "min-height: 300px;" class="hidden"></div>

			<!--Error Logging-->
			<div id = "error-dialog" title = "Error Dialog">
				<p>
					<center><i class = "fa fa-exclamation-triangle fa-5x"></i></center>
					<div id = 'error-dialog-text'>
						This page uses a feature <b>NOT</b> supported by your current web broswer.
					</div>
				</p>
			</div>

		</div> <!--Ending div for mainContainer-->

		<!--jQuery UI -->
		<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

		<!-- Chosen Source -->
		<script src = "https://cdnjs.cloudflare.com/ajax/libs/chosen/1.0/chosen.jquery.min.js"></script>

		<!-- Crossfilter Source -->
		<script src = "https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.1/crossfilter.min.js"></script>

		<!-- DataTables -->
		<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>

		<!-- Moment Source -->
		<script src = "https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>

		<!-- C3.js Source-->
		<script src="https://rawgit.com/c3js/c3/master/c3.js"></script>

		<!-- D3.js Source (Needed for C3)-->
   		<script src="https://d3js.org/d3.v5.js"></script>

   		<!--Local all local .js files-->
		<script src="/wcm/dataquery/js/page.js"></script>
		<script src="/wcm/dataquery/js/filters.js"></script>
		<script src="/wcm/dataquery/js/calendars.js"></script>
		<script src="/wcm/dataquery/js/errors.js"></script>
		<script src="/wcm/dataquery/js/tables.js"></script>
		<script src="/wcm/dataquery/js/chart.js"></script>
		<script src="/wcm/dataquery/js/jsonh.js"></script>

		<!--DataTables Date/Time Plugin for sorting-->
		<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/plug-ins/1.10.20/sorting/datetime-moment.js"></script>	

		<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/plug-ins/1.10.20/sorting/natural.js"></script>

		<script>
		//format of table so it sorts correctly
  			jQuery.fn.dataTable.moment( 'MM/DD/YYYY HHMM' );
		</script>
		
		<!--Load these scripts on document ready-->												
		<script type="text/javascript">
			//On document ready
			jQuery(document).ready(function(){
				var page = new Object();
				buildPage(page);
			});
		</script>
	</body>
</html>
